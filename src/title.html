<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        ::-webkit-scrollbar {
            display: none;
        }
        body {
            margin: 0;
            padding: 0;
            user-select: none;
        }
        div#main {
            align-items: center;
            background: #ffffff;
            color: #000000;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            vertical-align: middle;
            -webkit-app-region: drag;
        }
        div#main.dark {
            background: #242526;
            color: #ffffff;
        }
        div#main.black {
            background: #000000;
            color: #ffffff;
        }
        div#main.mac {
            font-weight: bold;
            font-size: 12px;
            height: 28px;
            overflow: hidden;
            padding: 0 80px;
            text-align: center;
            text-overflow: ellipsis;
            line-height: 28px;
        }
        div#main.win {
            display: flex;
            flex-direction: row;
            height: 32px;
            font-size: 14px;
            text-align: left;
        }
        div#main.win img {
            cursor: pointer;
            margin: 0 12px;
            width: 20px;
            -webkit-app-region: no-drag;
        }
        div#main span.title {
            flex: 1;
        }
        div#main button {
            cursor: pointer;
            height: 32px;
            width: 48px;
        }
        .window-close, .window-maximize, .window-unmaximize, .window-minimize {
            background: black;
        }
        .dark .window-close, .dark .window-maximize, .dark .window-unmaximize, .dark .window-minimize, 
        .black .window-close, .black .window-maximize, .black .window-unmaximize, .black .window-minimize  {
            background: white;
        }
        .dark .window-close.hover, .dark .window-maximize.hover, .dark .window-unmaximize.hover, .dark .window-minimize.hover, 
        .black .window-close.hover, .black .window-maximize.hover, .black .window-unmaximize.hover, .black .window-minimize.hover {
            background: black;
        }
        .button-wrapper {
            background: transparent;
            -webkit-app-region: no-drag;
        }
        .button-wrapper.close.hover {
            background: #ff5e57;
        }
        .button-wrapper.maximize.hover, .button-wrapper.unmaximize.hover {
            background: #28c840;
        }
        .button-wrapper.minimize.hover {
            background: #ffbe2c;
        }
        .hidden {
            display: none;
        }
        .window-close {
            -webkit-mask: url("data:image/svg+xml;charset=utf-8,%3Csvg width='11' height='11' viewBox='0 0 11 11' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M6.279 5.5L11 10.221l-.779.779L5.5 6.279.779 11 0 10.221 4.721 5.5 0 .779.779 0 5.5 4.721 10.221 0 11 .779 6.279 5.5z' fill='%23000'/%3E%3C/svg%3E") no-repeat 50% 50%;
            mask: url("data:image/svg+xml;charset=utf-8,%3Csvg width='11' height='11' viewBox='0 0 11 11' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M6.279 5.5L11 10.221l-.779.779L5.5 6.279.779 11 0 10.221 4.721 5.5 0 .779.779 0 5.5 4.721 10.221 0 11 .779 6.279 5.5z' fill='%23000'/%3E%3C/svg%3E") no-repeat 50% 50%;
        }
        
        .window-unmaximize {
            -webkit-mask: url("data:image/svg+xml;charset=utf-8,%3Csvg width='11' height='11' viewBox='0 0 11 11' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 8.798H8.798V11H0V2.202h2.202V0H11v8.798zm-3.298-5.5h-6.6v6.6h6.6v-6.6zM9.9 1.1H3.298v1.101h5.5v5.5h1.1v-6.6z' fill='%23000'/%3E%3C/svg%3E") no-repeat 50% 50%;
            mask: url("data:image/svg+xml;charset=utf-8,%3Csvg width='11' height='11' viewBox='0 0 11 11' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 8.798H8.798V11H0V2.202h2.202V0H11v8.798zm-3.298-5.5h-6.6v6.6h6.6v-6.6zM9.9 1.1H3.298v1.101h5.5v5.5h1.1v-6.6z' fill='%23000'/%3E%3C/svg%3E") no-repeat 50% 50%;
        }
        
        .window-maximize {
            -webkit-mask: url("data:image/svg+xml;charset=utf-8,%3Csvg width='11' height='11' viewBox='0 0 11 11' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 0v11H0V0h11zM9.899 1.101H1.1V9.9h8.8V1.1z' fill='%23000'/%3E%3C/svg%3E") no-repeat 50% 50%;
            mask: url("data:image/svg+xml;charset=utf-8,%3Csvg width='11' height='11' viewBox='0 0 11 11' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 0v11H0V0h11zM9.899 1.101H1.1V9.9h8.8V1.1z' fill='%23000'/%3E%3C/svg%3E") no-repeat 50% 50%;
        }
        
        .window-minimize {
            -webkit-mask: url("data:image/svg+xml;charset=utf-8,%3Csvg width='11' height='11' viewBox='0 0 11 11' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 4.399V5.5H0V4.399h11z' fill='%23000'/%3E%3C/svg%3E") no-repeat 50% 50%;
            mask: url("data:image/svg+xml;charset=utf-8,%3Csvg width='11' height='11' viewBox='0 0 11 11' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 4.399V5.5H0V4.399h11z' fill='%23000'/%3E%3C/svg%3E") no-repeat 50% 50%;
        }
        #resize {
            background: transparent;
            height: 3px;
            left: 0;
            position: fixed;
            right: 0;
            top: 0;
            width: 100%;
            z-index: 5;
            -webkit-app-region: no-drag;
        }
    </style>
</head>
<body>
    <div class="" id="main">
        <img src="" alt="">
        <span class="title">Facebook</span>
        <div class="window-button-wrapper minimize">
            <button class="window-button window-minimize" />
        </div>
        <div class="window-button-wrapper maximize">
            <button class="window-button window-maximize" />
        </div>
        <div class="window-button-wrapper unmaximize">
            <button class="window button window-unmaximize" />
        </div>
        <div class="window-button-wrapper close">
            <button class="window-button window-close" />
        </div>
    </div>
    <div id="resize"></div>
    <script>
        let { ipcMain, ipcRenderer, remote } = require('electron')
        let platform = remote.process.platform
        let settings = require('electron-settings')
        let titleView = document.querySelector('div#main')
        let titleText = document.querySelector('div span')
        let max = settings.getSync('max') || '0'
        let titleBarSettings = settings.getSync('title-bar') || '0'
        let buttons = document.querySelectorAll('button')
        let minButton = buttons[0]
        let maxButton = buttons[1]
        let unmaxButton = buttons[2]
        let closeButton = buttons[3]
        let currentWindow = remote.getCurrentWindow()

        if (titleBarSettings === '2') titleView.classList.add('dark')
        else if (titleBarSettings === '3') titleView.classList.add('black')
        if (platform === 'win32') {
            titleView.classList.add('win')
            let img = document.querySelector('img')
            img.src = 'assets/facebook.png'
            img.onclick = (e) => ipcRenderer.send('app-context-menu')
            buttons.forEach((button) => {
                button.onmouseenter = (e) => {
                    button.classList.add('hover')
                    button.parentElement.classList.add('hover')
                }
                button.onmouseleave = (e) => {
                    button.classList.remove('hover')
                    button.parentElement.classList.remove('hover')
                }
            })

            if (max === '1') {
                maxButton.classList.add('hidden')
                unmaxButton.classList.remove('hidden')
            } else {
                maxButton.classList.remove('hidden')
                unmaxButton.classList.add('hidden')
            }

            closeButton.onclick = (e) => currentWindow.close()
            maxButton.onclick = (e) => currentWindow.maximize()
            unmaxButton.onclick = (e) => currentWindow.unmaximize()
            minButton.onclick = (e) => currentWindow.minimize()

            currentWindow.on('minimize', () => {
                buttons.forEach((button) => {
                    button.classList.remove('hover')
                    button.parentElement.classList.remove('hover')
                })
            })
            currentWindow.on('maximize', () => {
                maxButton.classList.add('hidden')
                unmaxButton.classList.remove('hidden')
                buttons.forEach((button) => {
                    button.classList.remove('hover')
                    button.parentElement.classList.remove('hover')
                })
            })
            currentWindow.on('unmaximize', () => {
                maxButton.classList.remove('hidden')
                unmaxButton.classList.add('hidden')
                buttons.forEach((button) => {
                    button.classList.remove('hover')
                    button.parentElement.classList.remove('hover')
                })
            })
        } else {
            titleView.classList.add('mac')
            document.querySelectorAll('.window-button-wrapper').forEach((div) => div.classList.add('hidden'))
            document.querySelector('img').classList.add('hidden')
            titleView.ondblclick = (e) => {
                let doubleClickAction = remote.systemPreferences.getUserDefault('AppleActionOnDoubleClick', 'string')
                if (doubleClickAction === 'None' ) {
                    return
                } else if (doubleClickAction === 'Minimize') {
                    currentWindow.minimize()
                } else if (currentWindow.isMaximized()) {
                    currentWindow.unmaximize()
                } else {
                    currentWindow.maximize()
                }
            }
        }
        ipcRenderer.on('update-title', (event, title) => titleText.textContent = title)
    </script>
</body>
</html>